<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Android笔记（三） | Danel&#39;Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="常见控件的使用方法TextView它主要用于在界面上显示一段文本信息,比如你在第一章看到的 Hello world!下面我们就来看一看关于 TextView 的更多用法。将 activity_main.xml 中的代码改成如下所示:12345678910&amp;lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/androi">
<meta property="og:type" content="article">
<meta property="og:title" content="Android笔记（三）">
<meta property="og:url" content="http://itnewsblogs.com/2015/06/17/Android笔记（三）/index.html">
<meta property="og:site_name" content="Danel'Blog">
<meta property="og:description" content="常见控件的使用方法TextView它主要用于在界面上显示一段文本信息,比如你在第一章看到的 Hello world!下面我们就来看一看关于 TextView 的更多用法。将 activity_main.xml 中的代码改成如下所示:12345678910&amp;lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/androi">
<meta property="og:updated_time" content="2015-07-09T03:14:35.597Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android笔记（三）">
<meta name="twitter:description" content="常见控件的使用方法TextView它主要用于在界面上显示一段文本信息,比如你在第一章看到的 Hello world!下面我们就来看一看关于 TextView 的更多用法。将 activity_main.xml 中的代码改成如下所示:12345678910&amp;lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/androi">
  
    <link rel="alternative" href="/atom.xml" title="Danel&#39;Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xiz2r.com1.z0.glb.clouddn.com/author.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Danel_Cui</a></h1>
		</hgroup>

		
		<p class="header-subtitle">菩提本无树，明镜亦非台。本来无一物，何处惹尘埃。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/随笔">随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/loveOpenCV" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/3876484480" title="weibo">weibo</a>
					        
								<a class="google" target="_blank" href="https://plus.google.com/u/0/117071151761127343758/about" title="google">google</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/github/" style="font-size: 20px;">github</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/云服务平台/" style="font-size: 10px;">云服务平台</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.jikexueyuan.com/">极客学院</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.imooc.com/">慕课网</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.androiddevtools.cn/">Android开发工具集</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://hukai.me/android-training-course-in-chinese/index.html">Google Android官方教程</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://weibo.com/5198011111/C8Sj2hfZx?from=page_1005055198011111_profile&wvr=6&mod=weibotime&type=comment#_rnd1430994479501">外文书籍下载网址</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">正在Android、PHP路上前进的大三IT宅，PHP的确是一个神奇的语言!!</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Danel_Cui</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://7xiz2r.com1.z0.glb.clouddn.com/author.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Danel_Cui</h1>
			</hgroup>
			
			<p class="header-subtitle">菩提本无树，明镜亦非台。本来无一物，何处惹尘埃。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/loveOpenCV" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/3876484480" title="weibo">weibo</a>
			        
						<a class="google" target="_blank" href="https://plus.google.com/u/0/117071151761127343758/about" title="google">google</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-Android笔记（三）" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/06/17/Android笔记（三）/" class="article-date">
  	<time datetime="2015-06-17T02:47:56.000Z" itemprop="datePublished">2015-06-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android笔记（三）
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/记点博客/">记点博客</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="常见控件的使用方法">常见控件的使用方法</h3><h4 id="TextView">TextView</h4><p>它主要用于在界面上显示一段文本信息,比如你在第一章看到的 Hello world!下面我们就来看一看关于 TextView 的更多用法。将 activity_main.xml 中的代码改成如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">    android:id=<span class="string">"@+id/text_view"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:text=<span class="string">"This is TextView"</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>外面的 LinearLayout 先忽略不看,在 TextView 中我们使用 android:id 给当前控件定义了一个唯一标识符,这个属性在上一章中已经讲解过了。然后使用android:layout_width 指定了控件的宽度,使用 android:layout_height 指定了控件的高度。Android 中所有的控件都具有这两个属性,可选值有三种 match_parent、fill_parent 和 wrap_content,其中 match_parent 和fill_parent 的意义相同,现在官方更加推荐使用 match_parent。match_parent 表示让当前控件的大小和父布局的大小一样,也就是由父布局来决定当前控件的大小。wrap_content 表示让当前控件的大小能够刚好包含住里面的内容,也就是由控件内容决定当前控件的大小。所以上面的代码就表示让 TextView 的宽度和父布局一样宽,也就是手机屏幕的宽度,让 TextView的高度足够包含住里面的内容就行。<br><a id="more"></a><br>其实这是由于 TextView 中的文字默认是居左上角对齐的,虽然 TextView 的宽度充满了整个屏幕,可是从效果上完全看不出来。现在我们修改 TextView 的文字对齐方式,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">    android:id=<span class="string">"@+id/text_view"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:gravity=<span class="string">"center"</span></span><br><span class="line">    android:text=<span class="string">"This is TextView"</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>我们使用 android:gravity 来指定文字的对齐方式,可选值有 top、 bottom、 left、 right、 center等 , 可 以 用 “ | ” 来 同 时 指 定 多 个 值 , 这 里 我 们 指 定 的 “center” , 效 果 等 同 于”center_vertical|center_horizontal”,表示文字在垂直和水平方向都居中对齐。<br>另外我们还可以对 TextView 中文字的大小和颜色进行修改,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">    android:id=<span class="string">"@+id/text_view"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:gravity=<span class="string">"center"</span></span><br><span class="line">    android:textSize=<span class="string">"24sp"</span></span><br><span class="line">    android:textColor=<span class="string">"#00ff00"</span></span><br><span class="line">    android:text=<span class="string">"This is TextView"</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="Button">Button</h4><p>Button 是程序用于和用户进行交互的一个重要控件,相信你对这个控件已经是非常熟悉了,因为我们在上一章用了太多次 Button。它可配置的属性和 TextView 是差不多的,我们可以在 activity_main.xml 中这样加入Button:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    ......</span><br><span class="line">    &lt;Button</span><br><span class="line">    android:id=<span class="string">"@+id/button"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:text=<span class="string">"Button"</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>然后我们可以在 MainActivity 中为 Button 的点击事件注册一个监听器,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity &#123;</span><br><span class="line">private Button button;</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    <span class="built_in">set</span>ContentView(R.layout.activity_main);</span><br><span class="line">    button = (Button) findViewById(R.id.button);</span><br><span class="line">    button.setOnClickListener(new <span class="function"><span class="title">OnClickListener</span></span>() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    // 在此处添加逻辑</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="EditText">EditText</h4><p>EditText 是程序用于和用户进行交互的另一个重要控件,它允许用户在控件里输入和编辑内容,并可以在程序中对这些内容进行处理。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    ......</span><br><span class="line">    &lt;EditText</span><br><span class="line">    android:id=<span class="string">"@+id/edit_text"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>细心的你平时应该会留意到,一些做得比较人性化的软件会在输入框里显示一些提示性的文字,然后一旦用户输入了任何内容,这些提示性的文字就会消失。这种提示功能在Android 里是非常容易实现的,我们甚至不需要做任何的逻辑控制,因为系统已经帮我们都处理好了。修改 activity_main.xml,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span>&gt;</span><br><span class="line">    ......</span><br><span class="line">    &lt;EditText</span><br><span class="line">    android:id=<span class="string">"@+id/edit_text"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:hint=<span class="string">"Type something here"</span></span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>不过随着输入的内容不断增多,EditText 会被不断地拉长。这时由于 EditText 的高度指定的是wrap_content,因此它总能包含住里面的内容,但是当输入的内容过多时,界面就会变得非常难看。我们可以使用 android:maxLines 属性来解决这个问题,修改 activity_main.xml,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    ......</span><br><span class="line">    &lt;EditText</span><br><span class="line">    android:id=<span class="string">"@+id/edit_text"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:hint=<span class="string">"Type something here"</span></span><br><span class="line">    android:maxLines=<span class="string">"2"</span></span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>我们还可以结合使用 EditText 与 Button 来完成一些功能,比如通过点击按钮来获取EditText 中输入的内容。修改 MainActivity 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity implements OnClickListener &#123;</span><br><span class="line">    private Button button;</span><br><span class="line">    private EditText editText;</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    <span class="built_in">set</span>ContentView(R.layout.activity_main);</span><br><span class="line">    button = (Button) findViewById(R.id.button);</span><br><span class="line">    editText = (EditText) findViewById(R.id.edit_text);</span><br><span class="line">    button.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    switch (v.getId()) &#123;</span><br><span class="line">    <span class="keyword">case</span> R.id.button:</span><br><span class="line">    String inputText = editText.getText().toString();</span><br><span class="line">    Toast.makeText(MainActivity.this, inputText,</span><br><span class="line">    Toast.LENGTH_SHORT).show();</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="ImageView">ImageView</h4><p>ImageView 是用于在界面上展示图片的一个控件,通过它可以让我们的程序界面变得更加丰富多彩。学习这个控件需要提前准备好一些图片,由于目前 drawable 文件夹下已经有一张ic_launcher.png 图片了,那我们就先在界面上展示这张图吧,修改 activity_main.xml,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    ......</span><br><span class="line">    &lt;ImageView</span><br><span class="line">    android:id=<span class="string">"@+id/image_view"</span></span><br><span class="line">    android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:src=<span class="string">"@drawable/ic_launcher"</span></span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>可以看到,这里使用 android:src 属性给 ImageView 指定了一张图片,并且由于图片的宽和高都是未知的,所以将 ImageView 的宽和高都设定为 wrap_content,这样保证了不管图片的尺寸是多少都可以完整地展示出来。<br>我们还可以在程序中通过代码动态地更改 ImageView 中的图片。这里我准备了另外一张图片,jelly_bean.png,将它复制到res/drawable-hdpi 目录下,然后修改 MainActivity 的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity implements OnClickListener &#123;</span><br><span class="line">    private Button button;</span><br><span class="line">    private EditText editText;</span><br><span class="line">    private ImageView imageView;</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    <span class="built_in">set</span>ContentView(R.layout.activity_main);</span><br><span class="line">    button = (Button) findViewById(R.id.button);</span><br><span class="line">    editText = (EditText) findViewById(R.id.edit_text);</span><br><span class="line">    imageView = (ImageView) findViewById(R.id.image_view);</span><br><span class="line">    button.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    switch (v.getId()) &#123;</span><br><span class="line">    <span class="keyword">case</span> R.id.button:</span><br><span class="line">    imageView.setImageResource(R.drawable.jelly_bean);</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在按钮的点击事件里,通过调用 ImageView 的 setImageResource()方法将显示的图片改<br>成 jelly_bean。</p>
<hr>
<h4 id="ProgressBar">ProgressBar</h4><p>ProgressBar 用于在界面上显示一个进度条,表示我们的程序正在加载一些数据。它的用法也非常简单,修改activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    ......</span><br><span class="line">    &lt;ProgressBar</span><br><span class="line">    android:id=<span class="string">"@+id/progress_bar"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>这时你可能会问,旋转的进度条表明我们的程序正在加载数据,那数据总会有加载完的时候吧,如何才能让进度条在数据加载完成时消失呢?这里我们就需要用到一个新的知识<br>点,Android 控件的可见属性。所有的 Android 控件都具有这个属性,可以通过 android:visibility进行指定,可选值有三种,visible、invisible 和 gone。visible 表示控件是可见的,这个值是默认值,不指定 android:visibility 时,控件都是可见的invisible 表示控件不可见,但是它仍然占据着原来的位置和大小,可以理解成控件变成透明状态了。 gone 则表示控件不仅不可见,而且不再占用任何屏幕空间。我们还可以通过代码来 设置控件的可见性,使用的是setVisibility()方法,可以传入 View.VISIBLE、View.INVISIBLE 和View.GONE 三种值。接下来我们就来尝试实现,点击一下按钮让进度条消失,再点击一下按钮让进度条出现的这种效果。修改 MainActivity 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity implements OnClickListener &#123;</span><br><span class="line">    private Button button;</span><br><span class="line">    private EditText editText;</span><br><span class="line">    private ImageView imageView;</span><br><span class="line">    private ProgressBar progressBar;</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    <span class="built_in">set</span>ContentView(R.layout.activity_main);</span><br><span class="line">    button = (Button) findViewById(R.id.button);</span><br><span class="line">    editText = (EditText) findViewById(R.id.edit_text);</span><br><span class="line">    imageView = (ImageView) findViewById(R.id.image_view);</span><br><span class="line">    progressBar = (ProgressBar) findViewById(R.id.progress_bar);</span><br><span class="line">    button.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    switch (v.getId()) &#123;</span><br><span class="line">    <span class="keyword">case</span> R.id.button:</span><br><span class="line">    <span class="keyword">if</span> (progressBar.getVisibility() == View.GONE) &#123;</span><br><span class="line">    progressBar.setVisibility(View.VISIBLE);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    progressBar.setVisibility(View.GONE);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在按钮的点击事件中,我们通过 getVisibility()方法来判断 ProgressBar 是否可见,如果可见就将 ProgressBar 隐藏掉,如果不可见就将 ProgressBar 显示出来。重新运行程序,然后不断地点击按钮,你就会看到进度条会在显示与隐藏之间来回切换。<br>另外,我们还可以给 ProgressBar 指定不同的样式,刚刚是圆形进度条,通过 style 属性可以将它指定成水平进度条,修改 activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    ......</span><br><span class="line">    &lt;ProgressBar</span><br><span class="line">    android:id=<span class="string">"@+id/progress_bar"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    style=<span class="string">"?android:attr/progressBarStyleHorizontal"</span></span><br><span class="line">    android:max=<span class="string">"100"</span></span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>指定成水平进度条后,我们还可以通过 android:max 属性给进度条设置一个最大值,然后在代码中动态地更改进度条的进度。修改 MainActivity 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity implements OnClickListener &#123;</span><br><span class="line">......</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    switch (v.getId()) &#123;</span><br><span class="line">    <span class="keyword">case</span> R.id.button:</span><br><span class="line">    int progress = progressBar.getProgress();</span><br><span class="line">    progress = progress + <span class="number">10</span>;</span><br><span class="line">    progressBar.setProgress(progress);</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>每点击一次按钮,我们就获取进度条的当前进度,然后在现有的进度上加 10 作为更新后的进度。</p>
<hr>
<h4 id="AlertDialog">AlertDialog</h4><p>AlertDialog 可以在当前的界面弹出一个对话框,这个对话框是置顶于所有界面元素之上的,能够屏蔽掉其他控件的交互能力,因此一般 AlertDialog 都是用于提示一些非常重要的内容或者警告信息。比如为了防止用户误删重要内容,在删除前弹出一个确认对话框。下面我们来学习一下它的用法,修改 MainActivity 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity implements OnClickListener &#123;</span><br><span class="line">......</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    switch (v.getId()) &#123;</span><br><span class="line">    <span class="keyword">case</span> R.id.button:</span><br><span class="line">    AlertDialog.Builder dialog = new AlertDialog.Builder</span><br><span class="line">    (MainActivity.this);</span><br><span class="line">    dialog.setTitle(<span class="string">"This is Dialog"</span>);</span><br><span class="line">    dialog.setMessage(<span class="string">"Something important."</span>);</span><br><span class="line">    dialog.setCancelable(<span class="literal">false</span>);</span><br><span class="line">    dialog.setPositiveButton(<span class="string">"OK"</span>, new DialogInterface.</span><br><span class="line">    <span class="function"><span class="title">OnClickListener</span></span>() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(DialogInterface dialog, int <span class="built_in">which</span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    dialog.setNegativeButton(<span class="string">"Cancel"</span>, new DialogInterface.</span><br><span class="line">    <span class="function"><span class="title">OnClickListener</span></span>() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(DialogInterface dialog, int <span class="built_in">which</span>) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    dialog.show();</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>首先通过 AlertDialog.Builder 创建出一个 AlertDialog 的实例,然后可以为这个对话框设置标题、内容、可否取消等属性,接下来调用 setPositiveButton()方法为对话框设置确定按钮的点击事件,调用 setNegativeButton()方法设置取消按钮的点击事件,最后调用 show()方法将对话框显示出来。</p>
<hr>
<h4 id="ProgressDialog">ProgressDialog</h4><p>ProgressDialog 和 AlertDialog 有点类似,都可以在界面上弹出一个对话框,都能够屏蔽掉其他控件的交互能力。不同的是,ProgressDialog 会在对话框中显示一个进度条,一般是用于表示当前操作比较耗时,让用户耐心地等待。它的用法和 AlertDialog 也比较相似,修改 MainActivity 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity implements OnClickListener &#123;</span><br><span class="line">......</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    switch (v.getId()) &#123;</span><br><span class="line">    <span class="keyword">case</span> R.id.button:</span><br><span class="line">    ProgressDialog progressDialog = new ProgressDialog</span><br><span class="line">    (MainActivity.this);</span><br><span class="line">    progressDialog.setTitle(<span class="string">"This is ProgressDialog"</span>);</span><br><span class="line">    progressDialog.setMessage(<span class="string">"Loading..."</span>);</span><br><span class="line">    progressDialog.setCancelable(<span class="literal">true</span>);</span><br><span class="line">    progressDialog.show();</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    default:</span><br><span class="line">    <span class="built_in">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看到,这里也是先构建出一个ProgressDialog 对象,然后同样可以设置标题、内容、可否取消等属性,最后也是通过调用 show()方法将 ProgressDialog 显示出来。<br>注意如果在 setCancelable()中传入了 false,表示 ProgressDialog 是不能通过 Back 键取消掉的,这时你就一定要在代码中做好控制,当数据加载完成后必须要调用ProgressDialog的dismiss()方法来关闭对话框,否则ProgressDialog 将会一直存在。</p>
<hr>
<h3 id="四种基本布局">四种基本布局</h3><h4 id="LinearLayout">LinearLayout</h4><p>LinearLayout 又称作线性布局,是一种非常常用的布局。正如它名字所描述的一样,这个布局会将它所包含的控件在线性方向上依次排列。<br>既然是线性排列,肯定就不仅只有一个方向,那为什么上一节中的控件都是在垂直方向<br>排列的呢?这是由于我们通过 android:orientation 属性指定了排列方向是 vertical,如果指定的是 horizontal,控件就会在水平方向上排列了。下面我们通过实战来体会一下,修改activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button1"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:text=<span class="string">"Button 1"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button2"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:text=<span class="string">"Button 2"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button3"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:text=<span class="string">"Button 3"</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>这里需要注意,如果 LinearLayout 的排列方向是 horizontal,内部的控件就绝对不能将宽度指定为match_parent,因为这样的话单独一个控件就会将整个水平方向占满,其他的控件就没有可放置的位置了。同样的道理,如果 LinearLayout 的排列方向是 vertical,内部的控件就不能将高度指定为 match_parent。</p>
<p>首先来看 android:layout_gravity 属性,它和我们上一节中学到的 android:gravity 属性看起来有些相似,这两个属性有什么区别呢?其实从名字上就可以看出,android:gravity 是用于指定文字在控件中的对齐方式,而 android:layout_gravity 是用于指定控件在布局中的对齐方式 。android:layout_gravity 的 可选值和 android:gravity 差 不 多 , 但 是 需要 注意,当LinearLayout 的排列方向是 horizontal 时,只有垂直方向上的对齐方式才会生效,因为此时水平方向上的长度是不固定的,每添加一个控件,水平方向上的长度都会改变,因而无法指定该方向上的对齐方式。同样的道理,当 LinearLayout 的排列方向是 vertical 时,只有水平方向上的对齐方式才会生效。修改 activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"horizontal"</span> &gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button1"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_gravity=<span class="string">"top"</span></span><br><span class="line">        android:text=<span class="string">"Button 1"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button2"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_gravity=<span class="string">"center_vertical"</span></span><br><span class="line">        android:text=<span class="string">"Button 2"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button3"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_gravity=<span class="string">"bottom"</span></span><br><span class="line">        android:text=<span class="string">"Button 3"</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>接下来我们学习下 LinearLayout 中的另一个重要属性,android:layout_weight。这个属性允许我们使用比例的方式来指定控件的大小,它在手机屏幕的适配性方面可以起到非常重要的作用。比如我们正在编写一个消息发送界面,需要一个文本编辑框和一个发送按钮,修改activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"horizontal"</span> &gt;</span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/input_message"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_weight=<span class="string">"1"</span></span><br><span class="line">        android:hint=<span class="string">"Type something"</span></span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/send"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_weight=<span class="string">"1"</span></span><br><span class="line">        android:text=<span class="string">"Send"</span></span><br><span class="line">    /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>你会发现,这里竟然将 EditText 和 Button 的宽度都指定成了 0,这样文本编辑框和按钮还能显示出来吗?不用担心,由于我们使用了 android:layout_weight 属性,此时控件的宽度就不应该再由android:layout_width 来决定,这里指定成 0 是一种比较规范的写法。</p>
<p>然后我们在 EditText 和 Button 里都将android:layout_weight 属性的值指定为 1,这表示<br>EditText 和 Button 将在水平方向平分宽度。</p>
<p>为什么将 android:layout_weight 属性的值同时指定为 1 就会平分屏幕宽度呢?其实原理也很简单,系统会先把 LinearLayout 下所有控件指定的 layout_weight 值相加,得到一个总值,然后每个控件所占大小的比例就是用该控件的 layout_weight 值除以刚才算出的总值。因此如果想让 EditText 占据屏幕宽度的 3/5,Button 占据屏幕宽度的 2/5,只需要将 EditText 的layout_weight 改成 3,Button 的 layout_weight 改成 2 就可以了。</p>
<p>我 们 还 可 以 通 过 指 定 部 分 控 件 的layout_weight 值 , 来 实 现 更 好 的 效 果 。 修 改activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:orientation=<span class="string">"horizontal"</span> &gt;</span><br><span class="line">    &lt;EditText</span><br><span class="line">        android:id=<span class="string">"@+id/input_message"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_weight=<span class="string">"1"</span></span><br><span class="line">        android:hint=<span class="string">"Type something"</span></span><br><span class="line">        /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/send"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:text=<span class="string">"Send"</span></span><br><span class="line">        /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>这里我们仅指定了 EditText 的android:layout_weight 属性,并将 Button 的宽度改回wrap_content。这表示 Button 的宽度仍然按照 wrap_content 来计算,而 EditText 则会占满屏幕所有的剩余空间。使用这种方式编写的界面,不仅在各种屏幕的适配方面会非常好,而且看起来也更加舒服。</p>
<hr>
<h4 id="RelativeLayout">RelativeLayout</h4><p>RelativeLayout 又称作相对布局,也是一种非常常用的布局。和 LinearLayout 的排列规则不同,RelativeLayout 显得更加随意一些,它可以通过相对定位的方式让控件出现在布局的任何位置。也正因为如此,RelativeLayout 中的属性非常多,不过这些属性都是有规律可循的,其实并不难理解和记忆。我们还是通过实践来体会一下,修改 activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span> &gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button1"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_alignParentLeft=<span class="string">"true"</span></span><br><span class="line">        android:layout_alignParentTop=<span class="string">"true"</span></span><br><span class="line">        android:text=<span class="string">"Button 1"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button2"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_alignParentRight=<span class="string">"true"</span></span><br><span class="line">        android:layout_alignParentTop=<span class="string">"true"</span></span><br><span class="line">        android:text=<span class="string">"Button 2"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button3"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_centerInParent=<span class="string">"true"</span></span><br><span class="line">        android:text=<span class="string">"Button 3"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button4"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_alignParentBottom=<span class="string">"true"</span></span><br><span class="line">        android:layout_alignParentLeft=<span class="string">"true"</span></span><br><span class="line">        android:text=<span class="string">"Button 4"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button5"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_alignParentBottom=<span class="string">"true"</span></span><br><span class="line">        android:layout_alignParentRight=<span class="string">"true"</span></span><br><span class="line">        android:text=<span class="string">"Button 5"</span> /&gt;</span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>我们让 Button 1和父布局的左上角对齐,Button 2 和父布局的右上角对齐,Button 3 居中显示,Button 4和父布局的左下角对齐,Button 5 和父布局的右下角齐。虽然android:layout_alignParentLeft、android:layout_alignParentTop、android:layout_alignParentRight、 android:layout_alignParentBottom、android:layout_centerInParent 这几个属性我们之前都没接触过,可是它们的名字已经完全说明了它们的作用。</p>
<p>上面例子中的每个控件都是相对于父布局进行定位的,那控件可不可以相对于控件进行定位呢?当然是可以的,修改activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;RelativeLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span> &gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button3"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_centerInParent=<span class="string">"true"</span></span><br><span class="line">        android:text=<span class="string">"Button 3"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button1"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_above=<span class="string">"@id/button3"</span></span><br><span class="line">        android:layout_toLeftOf=<span class="string">"@id/button3"</span></span><br><span class="line">        android:text=<span class="string">"Button 1"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button2"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_above=<span class="string">"@id/button3"</span></span><br><span class="line">        android:layout_toRightOf=<span class="string">"@id/button3"</span></span><br><span class="line">        android:text=<span class="string">"Button 2"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button4"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_below=<span class="string">"@id/button3"</span></span><br><span class="line">        android:layout_toLeftOf=<span class="string">"@id/button3"</span></span><br><span class="line">        android:text=<span class="string">"Button 4"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button5"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_below=<span class="string">"@id/button3"</span></span><br><span class="line">        android:layout_toRightOf=<span class="string">"@id/button3"</span></span><br><span class="line">        android:text=<span class="string">"Button 5"</span> /&gt;</span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>这次的代码稍微复杂一点,不过仍然是有规律可循的。android:layout_above 属性可以让一个控件位于另一个控件的上方,需要为这个属性指定相对控件 id 的引用,这里我们填入了 @id/button3 , 表 示 让 该 控 件 位 于 Button 3 的 上 方 。 其 他 的 属 性 也 都 是 相 似 的 ,android:layout_below 表示让一个控件位于另一个控件的下方,android:layout_toLeftOf 表示让一个控件位于另一个控件的左侧,android:layout_toRightOf 表示让一个控件位于另一个控件的右侧。注意,当一个控件去引用另一个控件的 id 时,该控件一定要定义在引用控件的后面,不然会出现找不到 id 的情况。</p>
<p>RelativeLayout 中还有另外一组相对于控件进行定位的属性,android:layout<em>alignLeft 表示让一个控件的左边缘和另一个控件的左边缘齐,android:layout_alignRight 表示让一个控120<br>件的右边缘和另一个控件的右边缘对齐,还有android:layout_alignTop 和 android:layout</em><br>alignBottom,道理都是一样的。</p>
<hr>
<h4 id="FrameLayout">FrameLayout</h4><p>FrameLayout 相比于前面两种布局就简单太多了,因此它的应用场景也少了很多。这种布局没有任何的定位方式,所有的控件都会摆放在布局的左上角。让我们通过例子来看一看吧,修改 activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;FrameLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    &gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/button"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:text=<span class="string">"Button"</span></span><br><span class="line">    	/&gt;</span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=<span class="string">"@+id/image_view"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:src=<span class="string">"@drawable/ic_launcher"</span></span><br><span class="line">        /&gt;</span><br><span class="line">&lt;/FrameLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>可以看到,按钮和图片都是位于布局的左上角。由于图片是在按钮之后添加的,因此图片压在了按钮的上面。</p>
<hr>
<h4 id="TableLayout">TableLayout</h4><p>TableLayout 允许我们使用表格的方式来排列控件,这种布局也不是很常用,你只需要<br>了解一下它的基本用法就可以了。既然是表格,那就一定会有行和列,在设计表格时我们尽量应该让每一行都拥有相同的列数,这样的表格也是最简单的。不过有时候事情并非总会顺从我们的心意,当表格的某行一定要有不相等的列数时,就需要通过合并单元格的方式来应对。比如我们正在设计一个登录界面,允许用户输入账号密码后登录, 就可以将<br>activity_main.xml 中的代码改成如下所示:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;TableLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34;&#10;    android:layout_width=&#34;match_parent&#34;&#10;    android:layout_height=&#34;match_parent&#34; &#62;&#10;    &#60;TableRow&#62;&#10;        &#60;TextView&#10;        android:layout_height=&#34;wrap_content&#34;&#10;        android:text=&#34;Account:&#34; /&#62;&#10;        &#60;EditText&#10;        android:id=&#34;@+id/account&#34;&#10;        android:layout_height=&#34;wrap_content&#34;&#10;        android:hint=&#34;Input your account&#34; /&#62;&#10;    &#60;/TableRow&#62;&#10;    &#60;TableRow&#62;&#10;        &#60;TextView&#10;        android:layout_height=&#34;wrap_content&#34;&#10;        android:text=&#34;Password:&#34; /&#62;&#10;        &#60;EditText&#10;        android:id=&#34;@+id/password&#34;&#10;        android:layout_height=&#34;wrap_content&#34;&#10;        android:inputType=&#34;textPassword&#34; /&#62;&#10;        &#60;/TableRow&#62;&#10;    &#60;TableRow&#62;&#10;        &#60;Button&#10;        android:id=&#34;@+id/login&#34;&#10;        android:layout_height=&#34;wrap_content&#34;&#10;        android:layout_span=&#34;2&#34;&#10;        android:text=&#34;Login&#34; /&#62;&#10;    &#60;/TableRow&#62;&#10;&#60;/TableLayout&#62;</span><br></pre></td></tr></table></figure></p>
<p>在 TableLayout 中每加入一个 TableRow 就表示在表格中添加了一行,然后在 TableRow中每加入一个控件,就表示在该行中加入了一列,TableRow 中的控件是不能指定宽度的。这里我们将表格设计成了三行两列的格式,第一行有一个 TextView 和一个用于输入账号的EditText , 第 二 行 也 有 一 个 TextView 和 一 个 用 于 输 入 密 码 的 EditText , 我 们 通 过 将android:inputType 属性的值指定为textPassword,把 EditText 变为密码输入框。可是第三行只123第一行代码 —— Android有一个用于登录的按钮,前两行都有两列,第三行只有一列,这样的表格就会很难看,而且结构也非常不合理。这时就需要通过对单元格进行合并来解决这个问题,使用android:layout_span=”2”让登录按钮占据两列的空间,就可以保证表格结构的合理性了。</p>
<p>不过从图中可以看出,当前的登录界面并没有充分利用屏幕的宽度,右侧还空出了一块区 域 , 这 也 难 怪 , 因 为 在 TableRow 中 我 们 无 法 指 定 控 件 的 宽 度 。 这 时 使 用android:stretchColumns 属性就可以很好地解决这个问题,它允许将 TableLayout 中的某一列进行拉伸,以达到自动适应屏幕宽度的作用。修改 activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;TableLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:stretchColumns=<span class="string">"1"</span></span><br><span class="line">&gt;</span><br><span class="line">......</span><br><span class="line">&lt;/TableLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>这里将 android:stretchColumns 的值指定为 1,表示如果表格不能完全占满屏幕宽度,就是第二列进行拉伸。没错!指定成 1 就是拉伸第二列,指定成 0 就是拉伸第一列,不要以为这里我写错了哦。</p>
<hr>
<h3 id="创建自定义控件">创建自定义控件</h3><p>我们所用的所有控件都是直接或间接继承自 View 的,所用的所有布局都是直接或间接继承自 ViewGroup 的。View 是 Android 中一种最基本的 UI 组件,它可以在屏幕上绘制一块矩形区域,并能响应这块区域的各种事件,因此,我们使用的各种控件其实就是在 View 的基础之上又添加了各自特有的功能。而 ViewGroup 则是一种特殊的 View,它可以包含很多的子 View 和子 ViewGroup,是一个用于放置控件和布局的容器。</p>
<h4 id="引入布局">引入布局</h4><p>经过前面两节的学习,我想创建一个标题栏布局对你来说已经不是什么困难的事情了,只需要加入两个 Button 和一个 TextView,然后在布局中摆放好就可以了。可是这样做却存在着一个问题,一般我们的程序中可能有很多个活动都需要这样的标题栏,如果在每个活动的布局中都编写一遍同样的标题栏代码,明显就会导致代码的大量重复。这个时候我们就可以使用引入布局的方式来解决这个问题,新建一个布局 title.xml,代码如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:background=<span class="string">"@drawable/title_bg"</span> &gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/title_back"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_gravity=<span class="string">"center"</span></span><br><span class="line">        android:layout_margin=<span class="string">"5dip"</span></span><br><span class="line">        android:background=<span class="string">"@drawable/back_bg"</span></span><br><span class="line">        android:text=<span class="string">"Back"</span></span><br><span class="line">        android:textColor=<span class="string">"#fff"</span> /&gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">"@+id/title_text"</span></span><br><span class="line">        android:layout_width=<span class="string">"0dip"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_gravity=<span class="string">"center"</span></span><br><span class="line">        android:layout_weight=<span class="string">"1"</span></span><br><span class="line">        android:gravity=<span class="string">"center"</span></span><br><span class="line">        android:text=<span class="string">"Title Text"</span></span><br><span class="line">        android:textColor=<span class="string">"#fff"</span></span><br><span class="line">        android:textSize=<span class="string">"24sp"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=<span class="string">"@+id/title_edit"</span></span><br><span class="line">        android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">        android:layout_gravity=<span class="string">"center"</span></span><br><span class="line">        android:layout_margin=<span class="string">"5dip"</span></span><br><span class="line">        android:background=<span class="string">"@drawable/edit_bg"</span></span><br><span class="line">        android:text=<span class="string">"Edit"</span></span><br><span class="line">        android:textColor=<span class="string">"#fff"</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>可以看到,我们在 LinearLayout 中分别加入了两个 Button 和一个 TextView,左边的 Button可用于返回,右边的 Button 可用于编辑,中间的 TextView 则可以显示一段标题文本。上面的代码中大多数的属性你都已经是见过的,下面我来说明一下几个之前没有讲过的属性。android:background 用于为布局或控件指定一个背景,可以使用颜色或图片来进行填充,这里我提前准备好了三张图片, title_bg.png、 back_bg.png 和 edit_bg.png,分别用于作为标题栏、返回按钮和编辑按钮的背景。另外在两个 Button 中我们都使用了 android:layout_margin 这个属性,它可以指定控件在上下左右方向上偏移的距离,当然也可以使android:layout_marginLeft或 android:layout_marginTop 等属性来单独指定控件在某个方向上偏移的距离。现在标题栏布局已经编写完成了,剩下的就是如何在程序中使用这个标题栏了,修改activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tivity_main.xml 中的代码,如下所示:</span><br><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span> &gt;</span><br><span class="line">    &lt;include layout=<span class="string">"@layout/title"</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>没错!我们只需要通过一行 include 语句将标题栏布局引入进来就可以了。最后别忘了在 MainActivity 中将系统自带的标题栏隐藏掉,代码如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    requestWindowFeature(Window.FEATURE_NO_TITLE);</span><br><span class="line">    <span class="built_in">set</span>ContentView(R.layout.activity_main);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<hr>
<h4 id="创建自定义控件-1">创建自定义控件</h4><p>标题栏中的返回按钮,其实不管是在哪一个活动中,这个按钮的功能都是相同的,即销毁掉当前活动。而如果在每一个活动中都需要重新注册一遍返回按钮的点击事件,无疑又是增加了很多重复代码,这种情况最好是使用自定义控件的方式来解决。新建 TitleLayout 继承自LinearLayout,让它成为我们自定义的标题栏控件,代码如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class TitleLayout extends LinearLayout &#123;</span><br><span class="line">    public TitleLayout(Context context, AttributeSet attrs) &#123;</span><br><span class="line">    super(context, attrs);</span><br><span class="line">    LayoutInflater.from(context).inflate(R.layout.title, this);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>首先我们重写了 LinearLayout 中的带有两个参数的构造函数,在布局中引入 TitleLayout控件就会调用这个构造函数。然后在构造函数中需要对标题栏布局进行动态加载,这就要借助 LayoutInflater 来实现了。通过LayoutInflater 的 from()方法可以构建出一个LayoutInflater对象,然后调用 inflate()方法就可以动态加载一个布局文件,inflate()方法接收两个参数,第一个参数是要加载的布局文件的 id,这里我们传入R.layout.title,第二个参数是给加载好的布局再添加一个父布局,这里我们想要指定为 TitleLayout,于是直接传入 this。现在自定义控件已经创建好了,然后我们需要在布局文件中添加这个自定义控件,修改activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span> &gt;</span><br><span class="line">    &lt;com.example.uicustomviews.TitleLayout</span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    &gt;&lt;/com.example.uicustomviews.TitleLayout&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>添加自定义控件和添加普通控件的方式基本是一样的,只不过在添加自定义控件的时候我们需要指明控件的完整类名,包名在这里是不可以省略的。</p>
<p>然后我们来尝试为标题栏中的按钮注册点击事件,修改TitleLayout 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class TitleLayout extends LinearLayout &#123;</span><br><span class="line">    public TitleLayout(Context context, AttributeSet attrs) &#123;</span><br><span class="line">    super(context, attrs);</span><br><span class="line">    LayoutInflater.from(context).inflate(R.layout.title, this);</span><br><span class="line">    Button titleBack = (Button) findViewById(R.id.title_back);</span><br><span class="line">    Button titleEdit = (Button) findViewById(R.id.title_edit);</span><br><span class="line">    titleBack.setOnClickListener(new <span class="function"><span class="title">OnClickListener</span></span>() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    ((Activity) getContext()).finish();</span><br><span class="line">    <span class="number">130</span>第 <span class="number">3</span> 章 软件也要拼脸蛋,UI 开发的点点滴滴</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    titleEdit.setOnClickListener(new <span class="function"><span class="title">OnClickListener</span></span>() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    Toast.makeText(getContext(), <span class="string">"You clicked Edit button"</span>,</span><br><span class="line">    Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>首先还是通过 findViewById()方法得到按钮的实例,然后分别调用 setOnClickListener()方法给两个按钮注册了点击事件,当点击返回按钮时销毁掉当前的活动,当点击编辑按钮时弹出一段文本。</p>
<p>这样的话,每当我们在一个布局中引入 TitleLayout,返回按钮和编辑按钮的点击事件就已经自动实现好了,也是省去了很多编写重复代码的工作。</p>
<hr>
<h3 id="ListView">ListView</h3><p>ListView 绝对可以称得上是 Android 中最常用的控件之一,几乎所有的应用程序都会用到它。由于手机屏幕空间都比较有限,能够一次性在屏幕上显示的内容并不多,当我们的程序中有大量的数据需要展示的时候,就可以借助 ListView 来实现。ListView 允许用户通过手指上下滑动的方式将屏幕外的数据滚动到屏幕内,同时屏幕上原有的数据则会滚动出屏幕。相信你其实每天都在使用这个控件,比如查看手机联系人列表,翻阅微博的最新消息等等。</p>
<h4 id="ListView_的简单用法">ListView 的简单用法</h4><p>首先新建一个 ListViewTest 项目。然后修改activity_main.xml 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span> &gt;</span><br><span class="line">    &lt;ListView</span><br><span class="line">    android:id=<span class="string">"@+id/list_view"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span> &gt;</span><br><span class="line">    &lt;/ListView&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>在布局中加入 ListView 控件还算非常简单,先为ListView 指定了一个 id,然后将宽度和高度都设置为match_parent,这样 ListView 也就占据了整个布局的空间。</p>
<p>接下来修改 MainActivity 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity &#123;</span><br><span class="line">    private String[] data = &#123; <span class="string">"Apple"</span>, <span class="string">"Banana"</span>, <span class="string">"Orange"</span>, <span class="string">"Watermelon"</span>,</span><br><span class="line">    <span class="string">"Pear"</span>, <span class="string">"Grape"</span>, <span class="string">"Pineapple"</span>, <span class="string">"Strawberry"</span>, <span class="string">"Cherry"</span>, <span class="string">"Mango"</span> &#125;;</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    <span class="built_in">set</span>ContentView(R.layout.activity_main);</span><br><span class="line">    ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;(</span><br><span class="line">    MainActivity.this, android.R.layout.simple_list_item_1, data);</span><br><span class="line">    ListView listView = (ListView) findViewById(R.id.list_view);</span><br><span class="line">    listView.setAdapter(adapter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>既然 ListView 是用于展示大量数据的,那我们就应该先将数据提供好。这些数据可以是从网上下载的,也可以是从数据库中读取的,应该视具体的应用程序场景来决定。这里我们就简单使用了一个 data 数组来测试,里面包含了很多水果的名称。</p>
<p>不过,数组中的数据是无法直接传递给 ListView 的,我们还需要借助适配器来完成。Android 中提供了很多适配器的实现类,其中我认为最好用的就是 ArrayAdapter。它可以通过泛型来指定要适配的数据类型,然后在构造函数中把要适配的数据传入即可。 ArrayAdapter有多个构造函数的重载,你应该根据实际情况选择最合适的一种。这里由于我们提供的数据都是字符串,因此将 ArrayAdapter 的泛型指定为 String,然后在 ArrayAdapter 的构造函数中依次传入当前上下文、ListView 子项布局的 id,以及要适配的数据。注意我们使用了android.R.layout.simple_list_item_1 作为ListView 子项布局的 id,这是一个 Android 内置的布局文件,里面只有一个 TextView,可用于简单地显示一段文本。这样适配器对象就构建好了。最后,还需要调用 ListView 的 setAdapter()方法,将构建好的适配器对象传递进去,这样 ListView 和数据之间的关联就建立完成了。</p>
<h4 id="定制_ListView_的界面">定制 ListView 的界面</h4><p>定义一个实体类,作为 ListView 适配器的适配类型。新建类 Fruit,代码如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Fruit &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int imageId;</span><br><span class="line">    public Fruit(String name, int imageId) &#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">    this.imageId = imageId;</span><br><span class="line">    &#125;</span><br><span class="line">    public String <span class="function"><span class="title">getName</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    public int <span class="function"><span class="title">getImageId</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> imageId;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Fruit 类中只有两个字段,name 表示水果的名字,imageId 表示水果对应图片的资源 id。然后需要 为 ListView 的子项指定一个我们自定义的布局,在layout 目录下新 建fruit_item.xml,代码如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span> &gt;</span><br><span class="line">    &lt;ImageView</span><br><span class="line">    android:id=<span class="string">"@+id/fruit_image"</span></span><br><span class="line">    android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span> /&gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">    android:id=<span class="string">"@+id/fruit_name"</span></span><br><span class="line">    android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:layout_gravity=<span class="string">"center"</span></span><br><span class="line">    android:layout_marginLeft=<span class="string">"10dip"</span> /&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>在这个布局中,我们定义了一个 ImageView 用于显示水果的图片,又定义了一个TextView 用于显示水果的名称。<br>接下来需要创建一个自定义的适配器,这个适配器继承自 ArrayAdapter,并将泛型指定为 Fruit 类。新建类 FruitAdapter,代码如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    public class FruitAdapter extends ArrayAdapter&lt;Fruit&gt; &#123;</span><br><span class="line">    private int resourceId;</span><br><span class="line">    public FruitAdapter(Context context, int textViewResourceId,</span><br><span class="line">    List&lt;Fruit&gt; objects) &#123;</span><br><span class="line">    super(context, textViewResourceId, objects);</span><br><span class="line">    resourceId = textViewResourceId;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public View getView(int position, View convertView, ViewGroup parent) &#123;</span><br><span class="line">    Fruit fruit = getItem(position); // 获取当前项的Fruit实例</span><br><span class="line">    View view = LayoutInflater.from(getContext()).inflate(resourceId, null);</span><br><span class="line">    ImageView fruitImage = (ImageView) view.findViewById(R.id.fruit_image);</span><br><span class="line">    TextView fruitName = (TextView) view.findViewById(R.id.fruit_name);</span><br><span class="line">    fruitImage.setImageResource(fruit.getImageId());</span><br><span class="line">    fruitName.setText(fruit.getName());</span><br><span class="line">    <span class="built_in">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>FruitAdapter 重写了父类的一组构造函数,用于将上下文、ListView 子项布局的 id 和数据都传递进来。另外又重写了 getView()方法,这个方法在每个子项被滚动到屏幕内的时候会被调用。在 getView 方法中,首先通过getItem()方法得到当前项的 Fruit 实例,然后使用LayoutInflater 来为这个子项加载我们传入的布局,接着调用 View 的 findViewById()方法分别获取到ImageView 和 TextView 的实例,并分别调用它们的 setImageResource()和 setText()方法来设置显示的图片和文字,最后将布局返回,这样我们自定义的适配器就完成了。<br>下面修改 MainActivity 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity &#123;</span><br><span class="line">    private List&lt;Fruit&gt; fruitList = new ArrayList&lt;Fruit&gt;();</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    <span class="built_in">set</span>ContentView(R.layout.activity_main);</span><br><span class="line">    initFruits(); // 初始化水果数据</span><br><span class="line">    FruitAdapter adapter = new FruitAdapter(MainActivity.this,</span><br><span class="line">    R.layout.fruit_item, fruitList);</span><br><span class="line">    ListView listView = (ListView) findViewById(R.id.list_view);</span><br><span class="line">    listView.setAdapter(adapter);</span><br><span class="line">    &#125;</span><br><span class="line">    private void <span class="function"><span class="title">initFruits</span></span>() &#123;</span><br><span class="line">    Fruit apple = new Fruit(<span class="string">"Apple"</span>, R.drawable.apple_pic);</span><br><span class="line">    fruitList.add(apple);</span><br><span class="line">    Fruit banana = new Fruit(<span class="string">"Banana"</span>, R.drawable.banana_pic);</span><br><span class="line">    fruitList.add(banana);</span><br><span class="line">    Fruit orange = new Fruit(<span class="string">"Orange"</span>, R.drawable.orange_pic);</span><br><span class="line">    fruitList.add(orange);</span><br><span class="line">    Fruit watermelon = new Fruit(<span class="string">"Watermelon"</span>, R.drawable.watermelon_pic);</span><br><span class="line">    fruitList.add(watermelon);</span><br><span class="line">    Fruit pear = new Fruit(<span class="string">"Pear"</span>, R.drawable.pear_pic);</span><br><span class="line">    fruitList.add(pear);</span><br><span class="line">    Fruit grape = new Fruit(<span class="string">"Grape"</span>, R.drawable.grape_pic);</span><br><span class="line">    fruitList.add(grape);</span><br><span class="line">    Fruit pineapple = new Fruit(<span class="string">"Pineapple"</span>, R.drawable.pineapple_pic);</span><br><span class="line">    fruitList.add(pineapple);</span><br><span class="line">    Fruit strawberry = new Fruit(<span class="string">"Strawberry"</span>, R.drawable.strawberry_pic);</span><br><span class="line">    fruitList.add(strawberry);</span><br><span class="line">    Fruit cherry = new Fruit(<span class="string">"Cherry"</span>, R.drawable.cherry_pic);</span><br><span class="line">    fruitList.add(cherry);</span><br><span class="line">    Fruit mango = new Fruit(<span class="string">"Mango"</span>, R.drawable.mango_pic);</span><br><span class="line">    fruitList.add(mango);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看到,这里添加了一个 initFruits()方法,用于初始化所有的水果数据。在 Fruit 类的构造函数中将水果的名字和对应的图片 id 传入,然后把创建好的对象添加到水果列表中。<br>接着我们在 onCreate()方法中创建了 FruitAdapter 对象,并将 FruitAdapter 作为适配器传递给了ListView。这样定制 ListView 界面的任务就完成了。</p>
<hr>
<h4 id="提升_ListView_的运行效率">提升 ListView 的运行效率</h4><p>仔细观察,getView()方法中还有一个 convertView 参数,这个参数用于将之前加载好的布局进行缓存,以便之后可以进行重用。修改 FruitAdapter 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class FruitAdapter extends ArrayAdapter&lt;Fruit&gt; &#123;</span><br><span class="line">    ......</span><br><span class="line">    @Override</span><br><span class="line">    public View getView(int position, View convertView, ViewGroup parent) &#123;</span><br><span class="line">    Fruit fruit = getItem(position);</span><br><span class="line">    View view;</span><br><span class="line">    <span class="keyword">if</span> (convertView == null) &#123;</span><br><span class="line">    view = LayoutInflater.from(getContext()).inflate(resourceId, null);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    view = convertView;</span><br><span class="line">    &#125;</span><br><span class="line">    ImageView fruitImage = (ImageView) view.findViewById(R.id.fruit_image);</span><br><span class="line">    TextView fruitName = (TextView) view.findViewById(R.id.fruit_name);</span><br><span class="line">    fruitImage.setImageResource(fruit.getImageId());</span><br><span class="line">    fruitName.setText(fruit.getName());</span><br><span class="line">    <span class="built_in">return</span> view;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看到,现在我们在 getView()方法中进行了判断,如果 convertView 为空,则使用LayoutInflater 去加载布局,如果不为空则直接对 convertView 进行重用。这样就大大提高了ListView 的运行效率,在快速滚动的时候也可以表现出更好的性能。</p>
<p>不过,目前我们的这份代码还是可以继续优化的,虽然现在已经不会再重复去加载布局,但是每次在 getView()方法中还是会调用 View 的 findViewById()方法来获取一次控件的实例。我们可以借助一个 ViewHolder 来对这部分性能进行优化,修改 FruitAdapter 中的代码,如下<br>所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class FruitAdapter extends ArrayAdapter&lt;Fruit&gt; &#123;</span><br><span class="line">    ......</span><br><span class="line">    @Override</span><br><span class="line">    public View getView(int position, View convertView, ViewGroup parent) &#123;</span><br><span class="line">    Fruit fruit = getItem(position);</span><br><span class="line">    View view;</span><br><span class="line">    ViewHolder viewHolder;</span><br><span class="line">    <span class="keyword">if</span> (convertView == null) &#123;</span><br><span class="line">    view = LayoutInflater.from(getContext()).inflate(resourceId, null);</span><br><span class="line">    viewHolder = new ViewHolder();</span><br><span class="line">    viewHolder.fruitImage = (ImageView) view.findViewById</span><br><span class="line">    (R.id.fruit_image);</span><br><span class="line">    viewHolder.fruitName = (TextView) view.findViewById</span><br><span class="line">    (R.id.fruit_name);</span><br><span class="line">    view.setTag(viewHolder); // 将ViewHolder存储在View中</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    view = convertView;</span><br><span class="line">    viewHolder = (ViewHolder) view.getTag(); // 重新获取ViewHolder</span><br><span class="line">    &#125;</span><br><span class="line">    viewHolder.fruitImage.setImageResource(fruit.getImageId());</span><br><span class="line">    viewHolder.fruitName.setText(fruit.getName());</span><br><span class="line">    <span class="built_in">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line">    class ViewHolder &#123;</span><br><span class="line">    ImageView fruitImage;</span><br><span class="line">    TextView fruitName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们新增了一个内部类 ViewHolder,用于对控件的实例进行缓存。当 convertView 为空的时候,创建一个ViewHolder 对象,并将控件的实例都存放在ViewHolder 里,然后调用 View的 setTag()方法,将 ViewHolder 对象存储在 View 中。当 convertView 不为空的时候则调用View 的 getTag()方法,把 ViewHolder 重新取出。这样所有控件的实例都缓存在了 ViewHolder里,就没有必要每次都通过findViewById()方法来获取控件实例了</p>
<hr>
<h4 id="ListView_的点击事件">ListView 的点击事件</h4><p>修改 MainActivity 中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity &#123;</span><br><span class="line">    private List&lt;Fruit&gt; fruitList = new ArrayList&lt;Fruit&gt;();</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    <span class="built_in">set</span>ContentView(R.layout.activity_main);</span><br><span class="line">    initFruits();</span><br><span class="line">    FruitAdapter adapter = new FruitAdapter(MainActivity.this,</span><br><span class="line">    R.layout.fruit_item, fruitList);</span><br><span class="line">    ListView listView = (ListView) findViewById(R.id.list_view);</span><br><span class="line">    listView.setAdapter(adapter);</span><br><span class="line">    listView.setOnItemClickListener(new <span class="function"><span class="title">OnItemClickListener</span></span>() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onItemClick(AdapterView&lt;?&gt; parent, View view,</span><br><span class="line">    int position, long id) &#123;</span><br><span class="line">    Fruit fruit = fruitList.get(position);</span><br><span class="line">    Toast.makeText(MainActivity.this, fruit.getName(),</span><br><span class="line">    Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看到,我们使用了 setOnItemClickListener()方法来为 ListView 注册了一个监听器,当用户点击了 ListView 中的任何一个子项时就会回调onItemClick()方法,在这个方法中可以通过 position 参数判断出用户点击的是哪一个子项,然后获取到相应的水果,并通过 Toast将水果的名字显示出来。</p>
<hr>
<h3 id="单位和尺寸">单位和尺寸</h3><h4 id="px_和_pt_的窘境">px 和 pt 的窘境</h4><p>px 是像素的意思,即屏幕中可以显示的最小元素单元,我们应用里任何可见的东西都是由一个个像素点组成的。单独一个像素点非常的微小,肉眼是无法看见的,可是当许许多多的像素点聚集到一起时,就可以拼接成五彩缤纷的图案。<br>pt 是磅数的意思,1 磅等于 1/72 英寸,一般 pt 都会作为字体的单位来使用。</p>
<hr>
<h4 id="dp_和_sp_来帮忙">dp 和 sp 来帮忙</h4><p>dp 是密度无关像素的意思,也被称作 dip,和 px 相比,它在不同密度的屏幕中的显示比例将保持一致。</p>
<p>sp 是可伸缩像素的意思,它采用了和 dp 同样的设计理念,解决了文字大小的适配问题。</p>
<p>Android 中的密度就是屏幕每英寸所包含的像素数,通常以 dpi 为单位。比如一个手机屏幕的宽是 2 英寸长是 3 英寸,如果它的分辨率是 320<em>480 像素,那这个屏幕的密度就是 160dpi,如果它的分辨率是 640</em>960,那这个屏幕的密度就是 320dpi,因此密度值越高的屏幕显示的效果就越精细。</p>
<p>根据 Android 的规定,在 160dpi 的屏幕上,1dp 等于 1px,而在 320dpi 的屏幕上,1dp就等于 2px。因此,使用 dp 来指定控件的宽和高,就可以保证控件在不同密度的屏幕中的显示比例保持一致。</p>
<p>sp 的原理和 dp 是一样的,它主要是用于指定文字的大小。<br>总结一下,在编写 Android 程序的时候,尽量将控件或布局的大小指定成 match_parent或 wrap_content,如果必须要指定一个固定值,则使用 dp 来作为单位,指定文字大小的时候使用 sp 作为单位。</p>
<hr>
<h3 id="编写界面的最佳实践">编写界面的最佳实践</h3><h4 id="编写精美的聊天界面">编写精美的聊天界面</h4><p>图片都提供好了之后就可以开始编码了,首先还是编写主界面,修改 activity_main.xml中的代码,如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"match_parent"</span></span><br><span class="line">    android:background=<span class="string">"#d8e0e8"</span></span><br><span class="line">    android:orientation=<span class="string">"vertical"</span> &gt;</span><br><span class="line">    &lt;ListView</span><br><span class="line">    android:id=<span class="string">"@+id/msg_list_view"</span></span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"0dp"</span></span><br><span class="line">    android:layout_weight=<span class="string">"1"</span></span><br><span class="line">    android:divider=<span class="string">"#0000"</span> &gt;</span><br><span class="line">    &lt;/ListView&gt;</span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">    android:layout_width=<span class="string">"match_parent"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span> &gt;</span><br><span class="line">    &lt;EditText</span><br><span class="line">    android:id=<span class="string">"@+id/input_text"</span></span><br><span class="line">    android:layout_width=<span class="string">"0dp"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:layout_weight=<span class="string">"1"</span></span><br><span class="line">    android:hint=<span class="string">"Type somthing here"</span></span><br><span class="line">    android:maxLines=<span class="string">"2"</span> /&gt;</span><br><span class="line">    &lt;Button</span><br><span class="line">    android:id=<span class="string">"@+id/send"</span></span><br><span class="line">    android:layout_width=<span class="string">"wrap_content"</span></span><br><span class="line">    android:layout_height=<span class="string">"wrap_content"</span></span><br><span class="line">    android:text=<span class="string">"Send"</span> /&gt;</span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure></p>
<p>这里在主界面中放置了一个 ListView 用于显示聊天的消息内容,又放置了一个 EditText用于输入消息,还放置了一个 Button 用于发送消息。ListView 中用到了一个 android:divider属性,它可以指定 ListView 分隔线的颜色,这里#0000 表示将分隔线设为透明色。其他用到的所有属性都是我们之前学过的,相信你理解起来应该不费力。<br>然后我们来定义消息的实体类,新建 Msg,代码如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class Msg &#123;</span><br><span class="line">    public static final int TYPE_RECEIVED = <span class="number">0</span>;</span><br><span class="line">    public static final int TYPE_SENT = <span class="number">1</span>;</span><br><span class="line">    private String content;</span><br><span class="line">    private int <span class="built_in">type</span>;</span><br><span class="line">    public Msg(String content, int <span class="built_in">type</span>) &#123;</span><br><span class="line">    this.content = content;</span><br><span class="line">    this.type = <span class="built_in">type</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    public String <span class="function"><span class="title">getContent</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line">    public int <span class="function"><span class="title">getType</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> <span class="built_in">type</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上代码你应该是非常熟悉了,和我们学习 ListView 那一节的代码基本是一样的,只不过在 getView()方法中增加了对消息类型的判断。如果这条消息是收到的,则显示左边的消息布局,如果这条消息是发出的,则显示右边的消息布局。<br>最后修改 MainActivity 中的代码,来为 ListView 初始化一些数据,并给发送按钮加入事<br>件响应,代码如下所示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">public class MainActivity extends Activity &#123;</span><br><span class="line">    private ListView msgListView;</span><br><span class="line">    private EditText inputText;</span><br><span class="line">    private Button send;</span><br><span class="line">    private MsgAdapter adapter;</span><br><span class="line">    private List&lt;Msg&gt; msgList = new ArrayList&lt;Msg&gt;();</span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    requestWindowFeature(Window.FEATURE_NO_TITLE);</span><br><span class="line">    <span class="built_in">set</span>ContentView(R.layout.activity_main);</span><br><span class="line">    initMsgs(); // 初始化消息数据</span><br><span class="line">    adapter = new MsgAdapter(MainActivity.this, R.layout.msg_item, msgList);</span><br><span class="line">    inputText = (EditText) findViewById(R.id.input_text);</span><br><span class="line">    send = (Button) findViewById(R.id.send);</span><br><span class="line">    msgListView = (ListView) findViewById(R.id.msg_list_view);</span><br><span class="line">    msgListView.setAdapter(adapter);</span><br><span class="line">    send.setOnClickListener(new <span class="function"><span class="title">OnClickListener</span></span>() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) &#123;</span><br><span class="line">    String content = inputText.getText().toString();</span><br><span class="line">    <span class="keyword">if</span> (!<span class="string">""</span>.equals(content)) &#123;</span><br><span class="line">    Msg msg = new Msg(content, Msg.TYPE_SENT);</span><br><span class="line">    msgList.add(msg);</span><br><span class="line">    adapter.notifyDataSetChanged(); // 当有新消息时,刷新</span><br><span class="line">    ListView中的显示</span><br><span class="line">    msgListView.setSelection(msgList.size()); // 将ListView定位到最后一行</span><br><span class="line">    inputText.setText(<span class="string">""</span>); // 清空输入框中的内容</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    private void <span class="function"><span class="title">initMsgs</span></span>() &#123;</span><br><span class="line">    Msg msg1 = new Msg(<span class="string">"Hello guy."</span>, Msg.TYPE_RECEIVED);</span><br><span class="line">    msgList.add(msg1);</span><br><span class="line">    Msg msg2 = new Msg(<span class="string">"Hello. Who is that?"</span>, Msg.TYPE_SENT);</span><br><span class="line">    msgList.add(msg2);</span><br><span class="line">    Msg msg3 = new Msg(<span class="string">"This is Tom. Nice talking to you. "</span>, Msg.TYPE_RECEIVED);</span><br><span class="line">    msgList.add(msg3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在 initMsgs()方法中我们先初始化了几条数据用于在ListView 中显示。然后在发送按钮的点击事件里获取了 EditText 中的内容,如果内容不为空则创建出一个新的 Msg 对象,并把它添加到 msgList 列表中去。之后又调用了适配器的 notifyDataSetChanged()方法,用于通知列表的数据发生了变化,这样新增的一条消息才能够在 ListView 中显示。接着调用 ListView的setSelection()方法将显示的数据定位到最后一行,以保证一定可以看得到最后发出的一条消息。最后调用EditText 的 setText()方法将输入的内容清空。</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2015/06/10/Android笔记（二）/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Android笔记（二）</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="Android笔记（三）" data-title="Android笔记（三）" data-url="http://itnewsblogs.com/2015/06/17/Android笔记（三）/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"itnewsblogs"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 Danel_Cui
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>